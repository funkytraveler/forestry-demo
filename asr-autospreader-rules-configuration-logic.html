---
widget: asr
layout: desc-tab
title: Autospreader rules configuration Logic
AccordionID: asr-autospreader-rules-configuration-logic
---


    <div>

        <p>The <b>Logic</b> tab contains fields to set conditions and conditional logic for the rule.</p>
      <h3 id="condition-type">Condition type</h3>
      <p>Before defining the conditions for applying the rule to each leg, select one of the following condition types in <b>If the following condition is true for:</b></p>
      <ul>
        <li><b>ThisLeg</b> &mdash; Only the leg being evaluated must pass the specified condition. </li>
        <li> <b>ANY legs</b> &mdash; Autospreader iterates over every leg in the spread until it finds one for which the specified condition is true.</li>
        <li> <b>ALL legs</b> &mdash; Autospreader iterates over every leg in your spread and requires that each leg passes the specified condition.</li>
        <li><b>Always execute this rule</b> &mdash; Autospreader always executes the rule action(s) for the selected rule type.</li>
      </ul>
    </div>
    <div>
      <h3 id="condition-logic">Condition logic</h3>
      <p>After selecting a condition type, define a condition using as many expressions as needed. Double-click in the condition text field to enter an expression, or right-click the text field to add a complex expression using AND/OR conditions. After adding AND/OR, right-click the AND or OR to add another AND/OR condition. Expressions can be moved within a condition by clicking the expression to select it and using drag-and-drop to move it.</p>
      <p>The rule you create will be applied to a <i>single</i> leg of the spread. However, you can reference multiple legs in defining the condition.</p>
      <p> <b>Note</b>: A rule is "evaluated" per leg, however, multiple legs may be "iterated" as part of evaluating the rule.</p>
      <p>There are three leg identifier keywords you can enter in the text field that refer to the leg(s) involved in the expression(s):</p>
      <ul>
        <li><b>ThisLeg</b>. The leg for which the rule is being <b>evaluated</b>.</li>
        <li><b>Leg</b>. The leg being <b>iterated</b> over as part of the rule for ThisLeg.
          <p class=""> <b>Note</b>: Do not use the Leg identifier with the <b>When the condition is true for this leg</b> condition type, because this condition type has no implied iteration.</p>
        </li>
        <li><b>Leg#</b>. The nth leg of the spread regardless of iteration context.
          <p class=""><b>Note</b>: There is currently no validation to prevent you from referencing a non-existent leg (e.g., Leg3 in a two-legged spread).</p>
        </li>
      </ul>
      <p>Enter a leg identifier followed by a "." to select a leg attribute, such as:</p>
      <ul>
        <li><b>CurrentQuoteOrderWorkingPrice</b> (information pertaining to the current quote / hedge order(s) of the respective leg)</li>
        <li><b>BidPrice</b> (market data pertaining to the respective leg's market)</li>
      </ul>
      <p>When entering a leg identifier, the text field makes "intellisense" suggestions for which leg attribute to use. Refer to <a href="asr-reference.html#leg-attributes"> Leg Attributes</a> for a description of the leg attributes available in the <b>Condition</b> and <b>Action</b> text fields.</p>
      <p><img class="img-responsive" src="Content/auto-rule-typing.png"></img></p>
      <!--
      <p>The text field will highlight in green to indicate that an entered expression or portion of an expression is valid.</p>
      -->
      <p>To simplify rule construction, you only need to build a rule for the buy (bid) side of the trade. You can then choose to have it automatically reverse when it's being evaluated from the sell (ask) side. </p>
      <p>To automatically switch [Bid]- and [Ask]- attributes, AutospreaderÂ® Rules reverses arithmetic expressions ( "+" and "-" operations) and logical operators (&lt;, &gt;, &le;, &ge;) as long as they are accompanied by operands and the condition is wrapped in curly braces "{ }". For example, the following condition: {ThisLeg.CalculatedQuoteOrderPrice &lt; ThisLeg.BidPrice - ThisLeg.MinimumPriceIncrement}...is converted to the following when evaluated from the sell side:  {ThisLeg.CalculatedQuoteOrderPrice &gt; ThisLeg.AskPrice + ThisLeg.MinimumPriceIncrement}</p>
      <p>The following arithmetic expressions and operators can be used when entering your condition logic:</p>
      <ul>
        <li>Arithmeric expressions: +, -, /, * </li>
        <li>Operators: &lt;, &gt;, &le;, &ge; </li>
      </ul>
    </div>